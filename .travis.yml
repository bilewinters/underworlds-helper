os: osx
osx_image: xcode10.3

cache:
  directories:
    - node_modules

stages:
  - name: publish
    if: branch = travis-setup
  - name: build
    if: branch = travis-setup

jobs:
  include:
    - stage: publish
      name: 'Publish Javascript'
      script:
        - bash scripts/publish.sh
    - stage: build
      name: 'Build iOS'
      script:
        - bash scripts/buildApple.sh
    - stage: build
      name: 'Build Android'
      script:
        - bash scripts/buildAndroid.sh
